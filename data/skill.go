package data

import (
	"encoding/json"
	"io"
	"log"
	"os"
	"strconv"
)

// 技能ID
type SID uint8

const (
	EmptySkill      SID = iota
	CXSGJSkill          //雌雄双股剑技能
	HBJSkill            //寒冰剑技能
	BGZSkill            //八卦阵技能
	QLYYDSkill          //青龙偃月刀技能
	QLGSkill            //麒麟弓技能
	GSFSkill            //贯石斧技能
	ZQYSSkill           //朱雀羽扇技能
	ZBSMSkill           //丈八蛇矛技能
	FenYinSkill         //奋音
	JiLiSkill           //蒺藜
	TunJiangSkill       //屯江
	PoJunSkill          //破军
	LangXiSkill         //狼袭
	WenJiSkill          //问计
	RenDeSkill          //仁德
	WuShengSkill        //武圣
	LongDanSkill        //龙胆
	LieGongSkill        //烈弓
	LiMuSkill           //立牧
	TuSheSkill          //图射
	TieJiSkill          //铁骑
	DiDongSkill         //地动
	LuoLeiSkill         //落雷
	GuiHuoSkill         //鬼火
	GuiXinSkill         //归心
	ZhangBaSkill        //丈八
	QiLinSkill          //麒麟
	YanYueSkill         //青龙
	QingGangSkill       //青釭
	ZhuQueSkill         //朱雀
	ShiChouSkill        //誓仇
	YingHunSkill        //英魂
	XiaoShouSkill       //枭首
	GuanXingSkill       //观星
	YeYanSkill          //业炎
	QinYinSkill         //琴音
	GuDingSkill         //古锭
	FangTianSkill       //方天
	WuShuangSkill       //无双
	JinQuSkill          //进趋
	QiZhiSkill          //奇制
	LiYuSkill           //利驭
	ZhenGuSkill         //镇骨
	YingYuanSkill       //应援
	QianXiSkill         //潜袭
	NewBaZhenSkill      //孔明八阵
	BaZhenSkill         //八阵
	ZhuiJiSkill         //追击
	GuiJiSkill          //诡计
	SuoMingSkill        //索命
	XiXingSkill         //吸星
	ManJiaSkill         //蛮甲
	QiangZhengSkill     //强征
	LianYuSkill         //炼狱
	NiePanSkill         //涅槃
	MoJianSkill         //魔箭
	YuShouSkill         //驭兽
	JueCeSkill          //决策
	FanKuiSkill         //反馈
	DanShuSkill         //丹术
	MoYanSkill          //魔炎
	JiJiuSkill          //急救
	QingNangSkill       //青囊
	JieYinSkill         //结姻
	LiangZhuSkill       //良助
	MieWuSkill          //灭吴
	SanChenSkill        //三陈
	WuKuSkill           //武库
	ChengLueSkill       //成略
	ShiCaiSkill         //恃才
	FengPoSkill         //凤魄
	ZiShuSkill          //自书
	WuJiSkill           //武继
	XueHenSkill         //雪恨
	QuanJiSkill         //权计
	PaiYiSkill          //排异
	LongYinSkill        //龙吟
	XionHuoSkill        //凶祸
	YiSuanSkill         //亦算
	QueDiSkill          //却敌
	ZhuiFengSkill       //椎锋
	JiQiaoSkill         //机巧
	JiZhiSkill          //集智
	KeJiSkill           //克己
	JieYingSkill        //结营
	LuanWuSkill         //乱武
	ZhiHengSkill        //制衡
	JianYingSkill       //渐营
	ShiBeiSkill         //矢北
	QiaoShiSkill        //樵拾
	YanYuSkill          //燕语
	YingWuSkill         //莺语
	ShouXiSkill         //兽袭
	LueYingSkill        //略影
	MoJiaSkill          //魔甲
	LongXuanSkill       //龙旋
	LiexiSkill          //烈袭
	QinglongSkill       //青龙
	SkillListEndPos     //技能列表结束位置
	//以下是无需实例化的skill
	TurnBackSkill //翻面
	TieSuoSkill   //铁索
	AddHeapNum    //把牌放牌堆顶上
	CleanDrunk    //清除酒效果
	DrawLBSS      //乐不思蜀生效动画
	DrawBLCD      //兵粮寸断生效动画
	DrawLightning //闪电
	GetSkill      //获得技能
	//以上非技能skill仅用于显示
	ZGLNSkill      //诸葛连弩
	RWDSkill       //仁王盾
	TengJiaSkill   //藤甲
	GDDSkill       //古锭刀
	QGJSkill       //青钢剑
	PaoXiaoSkill   //咆哮
	MaShuSkill     //马术
	FeiYingSkill   //飞影
	JiaoZiSkill    //骄姿
	FuJiSkill      //伏骑
	GuiMeiSkill    //鬼魅
	ShanBengSkill  //山崩
	MingBaoSkill   //冥爆
	EnYuanSkill    //恩怨
	HuiLeiSkill    //挥泪
	BeiMingSkill   //悲鸣
	KongChengSkill //空城
	JueQingSkill   //绝情
	ShangShiSkill  //殇逝
	DuJinskill     //独进
	HuXiaoSkill    //虎啸
	WanShaSkill    //完杀
	WeiMuSkill     //帷幕
	TaiPingSkill   //太平
	BaoLianSkill   //暴敛
	RenWangSkill   //仁王
	ZuiJiuSkill    //醉酒
	ModaoSkill     //魔道
	XiaoJiSkill    //枭姬
	CunMuSkill     //寸目
	ShaJueSkill    //杀绝
	ChouJueSkill   //仇决
	QiCaiSkill     //奇才
	TongYeSkill    //统业
	CaiChon        //菜虫
	ShenShouSkill  //神兽
)

func (s SID) String() string {
	switch s {
	case CXSGJSkill:
		return "cxsgj"
	case RWDSkill:
		return "rwd"
	case TengJiaSkill:
		return "tengjia"
	case HBJSkill:
		return "hbj"
	case BGZSkill:
		return "bgz"
	case QLYYDSkill:
		return "qlyyd"
	case QLGSkill:
		return "qlg"
	case GSFSkill:
		return "gsf"
	case ZQYSSkill:
		return "zqys"
	case ZGLNSkill:
		return "zgln"
	case GDDSkill:
		return "gdd"
	case ZBSMSkill:
		return "zbsm"
	case PaoXiaoSkill:
		return "paoxiao"
	case MaShuSkill:
		return "mashu"
	case JiaoZiSkill:
		return "jiaozi"
	case FenYinSkill:
		return "fenyin"
	case JiLiSkill:
		return "jili"
	case PoJunSkill:
		return "pojun"
	case TunJiangSkill:
		return "tunjiang"
	case LangXiSkill:
		return "langxi"
	case FuJiSkill:
		return "fuji"
	case WenJiSkill:
		return "wenji"
	case RenDeSkill:
		return "rende"
	case WuShengSkill:
		return "wusheng"
	case LieGongSkill:
		return "liegong"
	case LiMuSkill:
		return "limu"
	case TuSheSkill:
		return "tushe"
	case LongDanSkill:
		return "longdan"
	case TieJiSkill:
		return "tieji"
	case GuiMeiSkill:
		return "guimei"
	case DiDongSkill:
		return "didong"
	case ShanBengSkill:
		return "shanbeng"
	case GuiXinSkill:
		return "guixin"
	case LuoLeiSkill:
		return "luolei"
	case BeiMingSkill:
		return "beiming"
	case FeiYingSkill:
		return "feiying"
	case HuiLeiSkill:
		return "huilei"
	case MingBaoSkill:
		return "mingbao"
	case GuiHuoSkill:
		return "guihuo"
	case EnYuanSkill:
		return "enyuan"
	case GuiJiSkill:
		return "guiji"
	case ZhangBaSkill:
		return "zhangba"
	case QiLinSkill:
		return "qilin"
	case ShiChouSkill:
		return "shichou"
	case QingGangSkill:
		return "qinggang"
	case YingHunSkill:
		return "yinghun"
	case XiaoShouSkill:
		return "xiaoshou"
	case YanYueSkill:
		return "qinglong"
	case GuanXingSkill:
		return "guanxing"
	case YeYanSkill:
		return "yeyan"
	case QinYinSkill:
		return "qinyin"
	case ZhuQueSkill:
		return "zhuque"
	case GuDingSkill:
		return "guding"
	case WuShuangSkill:
		return "wushuang"
	case FangTianSkill:
		return "fangtian"
	case JueQingSkill:
		return "jueqing"
	case KongChengSkill:
		return "kongcheng"
	case JinQuSkill:
		return "jinqu"
	case QiZhiSkill:
		return "qizhi"
	case LiYuSkill:
		return "liyu"
	case ZhenGuSkill:
		return "zhengu"
	case ZiShuSkill:
		return "zishu"
	case YingYuanSkill:
		return "yingyuan"
	case QianXiSkill:
		return "qianxi"
	case ZhuiJiSkill:
		return "zhuiji"
	case ShangShiSkill:
		return "shangshi"
	case BaZhenSkill:
		return "bazhen"
	case DuJinskill:
		return "dujin"
	case WanShaSkill:
		return "wansha"
	case WeiMuSkill:
		return "weimu"
	case TaiPingSkill:
		return "taiping"
	case SuoMingSkill:
		return "suoming"
	case XiXingSkill:
		return "xixing"
	case BaoLianSkill:
		return "baolian"
	case RenWangSkill:
		return "renwang"
	case ManJiaSkill:
		return "manjia"
	case LianYuSkill:
		return "lianyu"
	case ZuiJiuSkill:
		return "zuijiu"
	case QiangZhengSkill:
		return "qiangzheng"
	case NiePanSkill:
		return "niepan"
	case ModaoSkill:
		return "modao"
	case MoJianSkill:
		return "mojian"
	case YuShouSkill:
		return "yushou"
	case NewBaZhenSkill:
		return "newbazhen"
	case JueCeSkill:
		return "juece"
	case FanKuiSkill:
		return "fankui"
	case DanShuSkill:
		return "danshu"
	case MoYanSkill:
		return "moyan"
	case JiJiuSkill:
		return "jijiu"
	case QingNangSkill:
		return "qingnang"
	case XiaoJiSkill:
		return "xiaoji"
	case JieYinSkill:
		return "jieyin"
	case LiangZhuSkill:
		return "liangzhu"
	case MieWuSkill:
		return "miewu"
	case WuKuSkill:
		return "wuku"
	case SanChenSkill:
		return "sanchen"
	case ChengLueSkill:
		return "chenglue"
	case CunMuSkill:
		return "cunmu"
	case ShiCaiSkill:
		return "shicai"
	case FengPoSkill:
		return "fengpo"
	case HuXiaoSkill:
		return "huxiao"
	case WuJiSkill:
		return "wuji"
	case XueHenSkill:
		return "xuehen"
	case QuanJiSkill:
		return "quanji"
	case PaiYiSkill:
		return "paiyi"
	case LongYinSkill:
		return "longyin"
	case ShaJueSkill:
		return "shajue"
	case XionHuoSkill:
		return "xionhuo"
	case YiSuanSkill:
		return "yisuan"
	case QueDiSkill:
		return "quedi"
	case ChouJueSkill:
		return "choujue"
	case ZhuiFengSkill:
		return "zhuifeng"
	case JiZhiSkill:
		return "jizhi"
	case QiCaiSkill:
		return "qicai"
	case JiQiaoSkill:
		return "jiqiao"
	case KeJiSkill:
		return "keji"
	case JieYingSkill:
		return "jieying"
	case LuanWuSkill:
		return "luanwu"
	case ZhiHengSkill:
		return "zhiheng"
	case TongYeSkill:
		return "tongye"
	case JianYingSkill:
		return "jianying"
	case ShiBeiSkill:
		return "shibei"
	case QiaoShiSkill:
		return "shiqiao"
	case YanYuSkill:
		return "yanyu"
	case CaiChon:
		return "caichon"
	case YingWuSkill:
		return "yingwu"
	case LueYingSkill:
		return "lueying"
	case ShouXiSkill:
		return "shouxi"
	case MoJiaSkill:
		return "mojia"
	case LongXuanSkill:
		return "longxuan"
	case LiexiSkill:
		return "liexi"
	case QinglongSkill:
		return "qinglong"
	case ShenShouSkill:
		return "shenshou"
	}
	panic("id=" + strconv.Itoa(int(s)) + "的技能不存在")
}

// 返回技能的中文名
func (s SID) Name() string {
	switch s {
	case CXSGJSkill:
		return "雌雄双股剑"
	case HBJSkill:
		return "寒冰剑"
	case BGZSkill:
		return "八卦阵"
	case QLYYDSkill:
		return "青龙偃月刀"
	case GSFSkill:
		return "贯石斧"
	case ZQYSSkill:
		return "朱雀羽扇"
	case ZBSMSkill:
		return "丈八蛇矛"
	case FenYinSkill:
		return "奋音"
	case JiLiSkill:
		return "蒺藜"
	case TunJiangSkill:
		return "屯江"
	case PoJunSkill:
		return "破军"
	case LangXiSkill:
		return "狼袭"
	case WenJiSkill:
		return "问计"
	case RenDeSkill:
		return "仁德"
	case WuShengSkill:
		return "武圣"
	case LongDanSkill:
		return "龙胆"
	case LieGongSkill:
		return "烈弓"
	case LiMuSkill:
		return "立牧"
	case TuSheSkill:
		return "图射"
	case TieJiSkill:
		return "铁骑"
	case DiDongSkill:
		return "地动"
	case LuoLeiSkill:
		return "落雷"
	case GuiHuoSkill:
		return "鬼火"
	case GuiXinSkill:
		return "归心"
	case ZhangBaSkill:
		return "丈八"
	case QiLinSkill:
		return "麒麟"
	case YanYueSkill:
		return "斩月"
	case QingGangSkill:
		return "青釭"
	case ZhuQueSkill:
		return "朱雀"
	case ShiChouSkill:
		return "誓仇"
	case YingHunSkill:
		return "英魂"
	case XiaoShouSkill:
		return "枭首"
	case GuanXingSkill:
		return "观星"
	case YeYanSkill:
		return "业炎"
	case QinYinSkill:
		return "琴音"
	case GuDingSkill:
		return "古锭"
	case FangTianSkill:
		return "方天"
	case WuShuangSkill:
		return "无双"
	case JinQuSkill:
		return "进趋"
	case QiZhiSkill:
		return "奇制"
	case LiYuSkill:
		return "利驭"
	case ZhenGuSkill:
		return "镇骨"
	case YingYuanSkill:
		return "应援"
	case QianXiSkill:
		return "潜袭"
	case NewBaZhenSkill:
		return "八卦"
	case BaZhenSkill:
		return "八卦"
	case ZhuiJiSkill:
		return "追击"
	case GuiJiSkill:
		return "诡计"
	case SuoMingSkill:
		return "索命"
	case XiXingSkill:
		return "吸星"
	case ManJiaSkill:
		return "蛮甲"
	case QiangZhengSkill:
		return "强征"
	case LianYuSkill:
		return "炼狱"
	case NiePanSkill:
		return "涅槃"
	case MoJianSkill:
		return "魔箭"
	case YuShouSkill:
		return "驭兽"
	case JueCeSkill:
		return "决策"
	case FanKuiSkill:
		return "反馈"
	case DanShuSkill:
		return "丹术"
	case MoYanSkill:
		return "魔炎"
	case JiJiuSkill:
		return "急救"
	case QingNangSkill:
		return "青囊"
	case JieYinSkill:
		return "结姻"
	case LiangZhuSkill:
		return "良助"
	case MieWuSkill:
		return "灭吴"
	case SanChenSkill:
		return "三陈"
	case WuKuSkill:
		return "武库"
	case ChengLueSkill:
		return "成略"
	case ShiCaiSkill:
		return "恃才"
	case FengPoSkill:
		return "凤魄"
	case ZiShuSkill:
		return "自书"
	case PaoXiaoSkill:
		return "咆哮"
	case MaShuSkill:
		return "马术"
	case FeiYingSkill:
		return "飞影"
	case JiaoZiSkill:
		return "骄姿"
	case FuJiSkill:
		return "伏骑"
	case GuiMeiSkill:
		return "鬼魅"
	case ShanBengSkill:
		return "山崩"
	case MingBaoSkill:
		return "冥爆"
	case EnYuanSkill:
		return "恩怨"
	case HuiLeiSkill:
		return "挥泪"
	case BeiMingSkill:
		return "悲鸣"
	case KongChengSkill:
		return "空城"
	case JueQingSkill:
		return "绝情"
	case ShangShiSkill:
		return "殇逝"
	case DuJinskill:
		return "独进"
	case WanShaSkill:
		return "完杀"
	case WeiMuSkill:
		return "帷幕"
	case TaiPingSkill:
		return "太平"
	case BaoLianSkill:
		return "暴敛"
	case RenWangSkill:
		return "仁王"
	case ZuiJiuSkill:
		return "醉酒"
	case ModaoSkill:
		return "魔道"
	case XiaoJiSkill:
		return "枭姬"
	case CunMuSkill:
		return "寸目"
	case HuXiaoSkill:
		return "虎啸"
	case WuJiSkill:
		return "武继"
	case XueHenSkill:
		return "雪恨"
	case QuanJiSkill:
		return "权计"
	case PaiYiSkill:
		return "排异"
	case LongYinSkill:
		return "龙吟"
	case ShaJueSkill:
		return "杀绝"
	case XionHuoSkill:
		return "凶镬"
	case YiSuanSkill:
		return "亦算"
	case QueDiSkill:
		return "却敌"
	case ChouJueSkill:
		return "仇决"
	case ZhuiFengSkill:
		return "椎锋"
	case JiZhiSkill:
		return "集智"
	case QiCaiSkill:
		return "奇才"
	case JiQiaoSkill:
		return "机巧"
	case KeJiSkill:
		return "克己"
	case JieYingSkill:
		return "结营"
	case LuanWuSkill:
		return "乱武"
	case ZhiHengSkill:
		return "制衡"
	case TongYeSkill:
		return "统业"
	case JianYingSkill:
		return "渐营"
	case ShiBeiSkill:
		return "矢北"
	case QiaoShiSkill:
		return "樵拾"
	case YanYuSkill:
		return "燕语"
	case CaiChon:
		return "菜虫"
	case YingWuSkill:
		return "莺舞"
	case LueYingSkill:
		return "略影"
	case ShouXiSkill:
		return "兽袭"
	case MoJiaSkill:
		return "魔甲"
	case LongXuanSkill:
		return "龙旋"
	case LiexiSkill:
		return "坎水"
	case QinglongSkill:
		return "青龙"
	case ShenShouSkill:
		return "神兽"
	}
	return ""
}

var skillTextMap map[string]string

func (s SID) Text() string {
	if skillTextMap == nil {
		skillTextMap = map[string]string{}
		fd, err := os.Open("assets/skillText.json")
		if err != nil {
			log.Fatal(err)
		}
		b, err := io.ReadAll(fd)
		if err != nil {
			log.Fatal(err)
		}
		err = json.Unmarshal(b, &skillTextMap)
		if err != nil {
			log.Fatal(err)
		}
	}
	if text, ok := skillTextMap[s.String()]; ok {
		return text
	}
	panic("技能" + s.String() + "没有对应的文本")
}

var AtkSkillList = []SID{PaoXiaoSkill, LieGongSkill, TieJiSkill, MaShuSkill,
	ShiChouSkill, WuShuangSkill, FuJiSkill, JiaoZiSkill, PoJunSkill, FenYinSkill,
	JiLiSkill, WenJiSkill, TuSheSkill, LangXiSkill, YiSuanSkill, JueQingSkill,
	QianXiSkill, ZhuiJiSkill, DuJinskill, WanShaSkill, ZiShuSkill, ZuiJiuSkill,
	JueCeSkill, XiaoJiSkill, LiangZhuSkill, JiZhiSkill, QiCaiSkill, ShiCaiSkill,
	FengPoSkill, HuXiaoSkill, LongYinSkill, QueDiSkill, ChouJueSkill,
	LueYingSkill, LongXuanSkill, QinglongSkill}
